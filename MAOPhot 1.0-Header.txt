  MAOPhot 1.0
    
    MAOPhot calculates stellar magnitudes from 2 dimensional digital astrophotographs.
    It has the option of producing an extended AAVSO (American Association of Variable Star Observers)
    report which can then be submitted to the AAVSO using an online tool WebObs (http://www.aavso.org/webobs).

    There are many photometry measuring programs available such as VPhot (http://www.aavso.org/vphot) 
    and AstroImageJ (University of Louisville).

    MAOPhot uses PSF (point spread function) modeling which is well suited for measuring stellar magnitudes
    in crowded fields, or a particular star that has a close companion, e.g., Z Tau.

    See "PSF Photometry" (https://photutils.readthedocs.io/en/stable/psf.html) whcih describes many of the classes and methods used in MAOPhot
    
    Original MetroPSF (C) Copyright 2021, Maxym Usatov 
    <maxim.usatov@bcsatellite.net> Refer to metropsf.pdf for license information.
 


    General Workflow for Two Color Photometry and AAVSO report generation:
        - load Settings
        - Open B color fits file
        - Solve Image if not done already
        - Photometry->Interatively Subtracted PSF Photometry
        - Photometry->Get Comparison Stars
        - Repeat last 4 steps for V color
        - Two Color Photometry->Two Color Photometry (B,V)
        - Report->AAVSO: Generate Report; Two Color Photometry
        


    Modifications by petefleurant@gmail.com, as follows

    2022 6 16

    Slight modificationsa added
    - Add comp star label to .phot file
    - Use log10 in place of plain log (which is natural logarithm) in
        plot_photometry
    - Change extention ".phot" to ".csv"
    - replace chart with AAVSO Chart ID
    - Added pink fields "Notes" and "Check Star"
    - Fixed bug with resizing image before AAVSO report generates
    - Added title "Plot" (plotname_label) above 3d canvas with vsx_id 
        if available
    - Clear canvas if no star selected
    - Add choice for comparison catalog: Add AAVSO; this returns 
        comparison stars goven frame dimnensions. 
    - Make sure comparison stars are unique, uniquify by using largest flux_0
    - plots get cleared when opening a FITS file

    Added
        python logging into console_msg()


        generate_aavso_report_2color()


        2022 9 13 
        
        MAJOR CHANGE
        
        Modifications made to basically have MAOPhot mimic VPhot's "Two
        Color Photometry" (Usually B and V)
            
        See spreadsheet: 
            E:\Astronomy\Processing MAO images\ProcessingMaoImages_202281V1117Her.xlsx

        This includes formulas to generate "two color photometry". 
        generate_aavso_report_2color() uses the same formula which includes
        using transformation coefficients.

        The following coefficients are used and are added to the list of "pink"
        fields. (Pink fields required for report generation)
            Tbv
            Tv_bv
            Tb_bv
            
        These are associated with a particular telescope, eg. MAO
        
        Required data (Pink fields):
            Tbv
            Tv_bv
            Tb_bv
            "Select Comp Stars (AAVSO Label)"
            "Use Check star (AAVSO Label)"
            ...
            etc.
            
            
        The following formulas are calculated for each comp star and var = check star;
        then calculated again for each comp star and var = "Object Name". Eg. V1117 Her
        
        Δv = vvar - vcomp
        Δ(B-V) = Tbv * Δ(b-v)
        Vvar = Δv + Tv_bv * Δ(B-V) + Vcomp
        
        where:
        Δv  = IM of variable  - IM comp
        Vcomp = published V-magnitude of comp
        Δ(B-V) = Tbv * difference between standard color of var and standard color of comp
        
        
        In order to calculate these formulas and then generate a report, two (2) sets
        of results_tab_df in csv format must exist, one for B and one for V and
        must have been derived from the B and V images of the Var under analysis.
        
        When generate_aavso_report_2color is called, by the menu item: 
            Report->AAVSO: Generate Report Two Color Photometry
        then the user will be asked to specify the 2 aformentioned csv files.
        
        From these files/Panda databases, the formulas are calculated, and results 
        are displayed. 
        
        
        
        --
        get_comparison_stars
        
        Given the specified Check Star in field "Use Check Star (AAVSO label)"
        and the list of comp stars in "Select Comp Stars (AAVSO Label)", these
        stars are gotten from the AAVSO and each has an additional attribute,
        is_check_star, added to the results_tab_df DB. 
        

    --------------------------------------------------------------------------
        
        Removed use of flux_unc which is not always returned; use poisson_noise_error = 1.0857 / snr

        Select Comp Stars entry list; comp stars only used that are in this list




    Things needed
        - Add label number to red circle in plot; so that one knows which are
        outliers
      
      
 